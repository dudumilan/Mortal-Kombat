<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Seleção de Personagens</title>
  <link href="https://fonts.googleapis.com/css2?family=Staatliches&display=swap" rel="stylesheet">
  <style>
    @keyframes fadeSlideIn {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    body {
      background: black;
      color: white;
      font-family: 'Staatliches', cursive;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      overflow: hidden;
    }
    .personagem-container {
      display: flex;
      width: 100%;
      max-width: 1200px;
      align-items: center;
      justify-content: space-between;
      padding: 40px;
      gap: 40px;
      animation: fadeSlideIn 0.8s ease-out forwards;
      opacity: 0;
    }
    .personagem-destaque {
      text-align: center;
      flex-shrink: 0;
    }
    #personagem-img {
      width: 500px;
      height: auto;
      border: 4px solid red;
      transition: transform 0.3s ease;
      margin-left: 180px;
    }
    #personagem-img.animate {
      transform: scale(1.1);
    }
    #personagem-nome {
      margin-top: 15px;
      font-size: 32px;
      color: orange;
      text-shadow: 2px 2px black;
    }
    .grade-personagens {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 20px;
      justify-content: center;
      align-content: center;
    }
    .personagem {
      width: 100px;
      height: 100px;
      border: 2px solid transparent;
      background-color: #222;
      padding: 4px;
      box-sizing: border-box;
      cursor: pointer;
      transition: transform 0.2s;
      opacity: 0;
      animation: fadeSlideIn 0.6s ease forwards;
    }
    .personagem:nth-child(1) { animation-delay: 0.2s; }
    .personagem:nth-child(2) { animation-delay: 0.3s; }
    .personagem:nth-child(3) { animation-delay: 0.4s; }
    .personagem:nth-child(4) { animation-delay: 0.5s; }
    .personagem:nth-child(5) { animation-delay: 0.6s; }
    .personagem:nth-child(6) { animation-delay: 0.7s; }
    .personagem:nth-child(7) { animation-delay: 0.8s; }
    .personagem:nth-child(8) { animation-delay: 0.9s; }
    .personagem:nth-child(9) { animation-delay: 1.0s; }
    .personagem:hover {
      transform: scale(1.1);
      border-color: rgb(251, 255, 0);
    }

    .personagem.selecionado {
      border: 2px solid rgb(255, 0, 0);
    }

    .personagem img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body onload="document.querySelector('.personagem-container').style.opacity = '1'">
    <audio id="bg-music" src="audios/heart_of_courage.mp3" loop></audio>

<script>
  function startBgMusic() {
    const bgMusic = document.getElementById('bg-music');
    bgMusic.volume = 0.02;
    bgMusic.play().catch((err) => {
      console.warn('Erro ao tocar música de fundo:', err);
    });
    document.removeEventListener('click', startBgMusic);
    document.removeEventListener('keydown', startBgMusic);
  }
  document.addEventListener('click', startBgMusic);
  document.addEventListener('keydown', startBgMusic);
  function irParaTorre() {
      const personagemSelecionado = {
        nome: 'SCORPION',
        imagem: 'imagens/scorpion3.png'
      };
      localStorage.setItem('personagemSelecionado', JSON.stringify(personagemSelecionado));
      localStorage.setItem('bgMusicTime', bgMusic.currentTime);
      window.location.href = 'torre.html';
  }
</script>
  </body>
  <audio id="som-selecao"></audio>
  <audio id="som-confirmacao" src="audios/confirmar.mp3"></audio>
  <div class="personagem-container">
    <div class="personagem-destaque">
      <img id="personagem-img" src="imagens/mortalkombat logo.png" alt="Personagem Selecionado">
      <div id="personagem-nome">Personagens</div>
    </div>
    <div class="grade-personagens">
      <div class="personagem selecionado" data-nome="SCORPION" data-img="imagens/scorpion3.png" data-audio="audios/scorpion.mp3">
        <img src="imagens/scorpion.png" alt="Scorpion">
      </div>
      <div class="personagem" data-nome="LIU KANG" data-img="imagens/liukang3.png" data-audio="audios/liukang.mp3">
        <img src="imagens/liukang1.png" alt="Liu Kang">
      </div>
      <div class="personagem" data-nome="RAIDEN" data-img="imagens/raiden3.png" data-audio="audios/raiden.mp3">
        <img src="imagens/raiden1.png" alt="Raiden">
      </div>
      <div class="personagem" data-nome="SUB-ZERO" data-img="imagens/subzero3.png" data-audio="audios/subzero.mp3">
        <img src="imagens/subzero1.png" alt="Sub-zero">
      </div>
      <div class="personagem" data-nome="NOOB-SAIBOT" data-img="imagens/noob3.png" data-audio="audios/noob.mp3">
        <img src="imagens/noob1.png" alt="Noob-saibot">
      </div>
      <div class="personagem" data-nome="JONNY CAGE" data-img="imagens/jonnycage3.png" data-audio="audios/jonnycage.mp3">
        <img src="imagens/jonnycage1.png" alt="Jonnycage">
      </div>
      <div class="personagem" data-nome="SHANG TSUNG" data-img="imagens/shangsung3.png" data-audio="audios/shangsung.mp3">
        <img src="imagens/shangsung1.png" alt="Shang Tsung">
      </div>
      <div class="personagem" data-nome="ERMAC" data-img="imagens/ermac3.png" data-audio="audios/ermac.mp3">
        <img src="imagens/ermac1.png" alt="Ermac">
      </div>
      <div class="personagem" data-nome="SMOKE" data-img="imagens/smoke3.png" data-audio="audios/smoke (2).mp3">
        <img src="imagens/smoke1.png" alt="smoke">
      </div>
      
      
      </div>
    </div>
  </div>
  <script>
  const personagens = document.querySelectorAll('.personagem');
  const personagemImg = document.getElementById('personagem-img');
  const personagemNome = document.getElementById('personagem-nome');
  const somSelecao = document.getElementById('som-selecao');
  const somConfirmacao = document.getElementById('som-confirmacao');
  const colunas = 3;
  somSelecao.volume = 0.3;
  somConfirmacao.volume = 0.3;
  let selectedIndex = 0;
  function updatePersonagem(index) {
    personagens.forEach(p => p.classList.remove('selecionado'));
    const personagem = personagens[index];
    personagem.classList.add('selecionado');
    personagemImg.src = personagem.dataset.img;
    personagemNome.textContent = personagem.dataset.nome;
  }
  personagens.forEach((p, i) => {
    p.addEventListener('click', () => {
      selectedIndex = i;
      updatePersonagem(i);
      somSelecao.src = p.dataset.audio;
      somSelecao.currentTime = 0;
      somSelecao.play();
    });
  });
  document.addEventListener('keydown', (e) => {
  const total = personagens.length;
  const linha = Math.floor(selectedIndex / colunas);
  const coluna = selectedIndex % colunas;
  if (e.key === 'ArrowRight' && coluna < colunas - 1 && selectedIndex + 1 < total) {
    selectedIndex++;
  } else if (e.key === 'ArrowLeft' && coluna > 0) {
    selectedIndex--;
  } else if (e.key === 'ArrowDown' && selectedIndex + colunas < total) {
    selectedIndex += colunas;
  } else if (e.key === 'ArrowUp' && selectedIndex - colunas >= 0) {
    selectedIndex -= colunas;
  } else if (e.key === 'Enter') {
    const personagem = personagens[selectedIndex];
    somSelecao.src = personagem.dataset.audio;
    somSelecao.currentTime = 0;
    somSelecao.play();
    somConfirmacao.currentTime = 0;
    somConfirmacao.play();
    localStorage.setItem('personagemSelecionado', JSON.stringify({
      nome: personagem.dataset.nome,
      imagem: personagem.dataset.img
    }));

    setTimeout(myGreeting, 3000);

  }

  updatePersonagem(selectedIndex);
});

function myGreeting(){
  window.location.href = 'torre.html';
}
localStorage.setItem('personagemSelecionado', JSON.stringify({
  nome: 'Scorpion',
  imagem: 'imagens/scorpion.png'
}));

  </script>
</body>
</html>
